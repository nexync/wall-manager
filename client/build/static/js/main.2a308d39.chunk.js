(this.webpackJsonpwall=this.webpackJsonpwall||[]).push([[0],{349:function(e,t,r){},350:function(e,t,r){"use strict";r.r(t);var a=r(7),n=r(0),c=r.n(n),s=r(39),o=r.n(s),i=r(74),l=r(32),u=r(27),d=r.n(u),j=r(45),p=r(41),b=r(185),O=r(43),h=function(e,t){switch(t.type){case"GET_ROUTES":return Object(O.a)(Object(O.a)({},e),{},{loading:!1,routes:t.payload});case"ADD_ROUTE":return Object(O.a)(Object(O.a)({},e),{},{routes:[].concat(Object(b.a)(e.routes),[t.payload])});case"EDIT_ROUTE":return Object(O.a)(Object(O.a)({},e),{},{routes:e.routes.map((function(e){return e._id===t.payload?Object(O.a)(Object(O.a)({},e),{},{editable:!e.editable}):e}))});case"EDIT_INFO":var r=e.routes.filter((function(e){return e._id===t.payload.id})),a=Object(p.a)(r,1)[0];return a[t.payload.field]=t.payload.info,Object(O.a)(Object(O.a)({},e),{},{routes:e.routes.map((function(e){return e._id===t.payload._id?a:e}))});case"DELETE_ROUTE":return Object(O.a)(Object(O.a)({},e),{},{routes:e.routes.filter((function(e){return e._id!==t.payload}))});case"LOGIN_USER":return Object(O.a)(Object(O.a)({},e),{},{currUser:t.payload,error:null});case"ERROR":return console.log(t.payload),Object(O.a)(Object(O.a)({},e),{},{error:t.payload});default:return e}},f=r(61),x=r.n(f),g={routes:[],error:null,loading:!0,currUser:null},m=Object(n.createContext)(g),v=function(e){var t=e.children,r=Object(n.useReducer)(h,g),c=Object(p.a)(r,2),s=c[0],o=c[1];function i(){return(i=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/api/dashboard");case 3:t=e.sent,o({type:"GET_ROUTES",payload:t.data.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"ERROR",payload:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function l(){return(l=Object(j.a)(d.a.mark((function e(t){var r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,x.a.post("/api/dashboard",t,r);case 4:a=e.sent,o({type:"ADD_ROUTE",payload:a.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:"ERROR",payload:e.t0.response.data});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function u(){return(u=Object(j.a)(d.a.mark((function e(t){var r,a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.route,a=t.id,n={headers:{"Content-Type":"application/json"}},e.prev=2,!r.editable){e.next=6;break}return e.next=6,x.a.put("/api/dashboard".concat(a),r,n);case 6:o({type:"EDIT_ROUTE",payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o({type:"ERROR",payload:e.t0.response.data});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function b(){return(b=Object(j.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,e.prev=1,e.next=4,x.a.delete("/api/dashboard".concat(r));case 4:o({type:"DELETE_ROUTE",payload:r}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),o({type:"ERROR",payload:e.t0.response.data});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function O(){return(O=Object(j.a)(d.a.mark((function e(t){var r,a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.email,a=t.password,e.next=4,x.a.post("/api/register",t);case 4:return e.next=6,x.a.post("/api/login",{email:r,password:a});case 6:return n=e.sent,c={token:n.data.token,user:n.data.user},localStorage.setItem("auth-token",n.data.token),console.log("User logged in and registered"),o({type:"LOGIN_USER",payload:c}),e.abrupt("return",!0);case 14:return e.prev=14,e.t0=e.catch(0),o({type:"ERROR",payload:e.t0.response.data.error}),e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function f(){return(f=Object(j.a)(d.a.mark((function e(t){var r,a,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.email,a=t.password,e.prev=1,e.next=4,x.a.post("/api/login",{email:r,password:a});case 4:return n=e.sent,c={token:n.data.token,user:n.data.user},localStorage.setItem("auth-token",n.data.token),o({type:"LOGIN_USER",payload:c}),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(1),o({type:"ERROR",payload:e.t0.response.data.error}),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function v(){return(v=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.setItem("auth-token",""),o({type:"LOGIN_USER",payload:null});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(j.a)(d.a.mark((function e(){var t,r,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("checking for logged in user"),e.prev=1,null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),console.log(t),e.next=7,x.a.post("/api/token",null,{headers:{"x-auth-token":t}});case 7:if(!e.sent.data){e.next=17;break}return e.next=11,x.a.get("/api/",{headers:{"x-auth-token":t}});case 11:return r=e.sent,a={token:t,user:r.data.user},o({type:"LOGIN_USER",payload:a}),e.abrupt("return",!0);case 17:return e.abrupt("return",!1);case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(1),o({type:"ERROR",payload:e.t0.response.data.error}),e.abrupt("return",!1);case 24:case"end":return e.stop()}}),e,null,[[1,20]])})))).apply(this,arguments)}return Object(a.jsx)(m.Provider,{value:{routes:s.routes,error:s.error,loading:s.loading,currUser:s.currUser,getRoutes:function(){return i.apply(this,arguments)},addRoute:function(e){return l.apply(this,arguments)},editRoute:function(e){return u.apply(this,arguments)},editInfo:function(e,t,r){o({type:"EDIT_INFO",payload:{id:e,info:t,field:r}})},deleteRoute:function(e){return b.apply(this,arguments)},register:function(e){return O.apply(this,arguments)},login:function(e){return f.apply(this,arguments)},logout:function(){return v.apply(this,arguments)},check:function(){return y.apply(this,arguments)}},children:t})},y=r(356),k=r(72),R=r.p+"static/media/logo.1d638c3e.png";function w(){var e=Object(n.useContext)(m).check,t=Object(l.f)();return Object(n.useEffect)((function(){(function(){var r=Object(j.a)(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e();case 2:r.sent&&t.push("/dashboard");case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}})()()}),[]),Object(a.jsxs)("div",{align:"center",children:[Object(a.jsx)(y.a,{src:R,className:"image",onClick:function(){return t.push("/")}}),Object(a.jsx)("div",{className:"button-container",children:Object(a.jsx)(k.a,{block:!0,ghost:!0,shape:"round",size:"large",onClick:function(){t.push("/register")},children:"Register"})}),Object(a.jsx)("div",{className:"button-container",children:Object(a.jsx)(k.a,{block:!0,ghost:!0,shape:"round",size:"large",onClick:function(){t.push("/login")},children:"Login"})}),Object(a.jsx)("div",{className:"button-container",children:Object(a.jsx)(k.a,{block:!0,ghost:!0,shape:"round",size:"large",onClick:function(){t.push("/dashboard")},children:"Guest"})}),Object(a.jsx)("p",{children:"Please don't sue me Duke"})]})}var C=r(353),E=r(358);function _(){var e=Object(l.f)(),t=Object(n.useState)(""),r=Object(p.a)(t,2),c=r[0],s=r[1],o=Object(n.useState)(""),i=Object(p.a)(o,2),u=i[0],b=i[1],O=Object(n.useContext)(m),h=O.login,f=O.error,x=function(){var t=Object(j.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h({email:c,password:u});case 3:t.sent&&e.push("/dashboard"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.message);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("div",{align:"center",children:[Object(a.jsx)(y.a,{src:R,className:"image",onClick:function(){return e.push("/")}}),Object(a.jsxs)(C.a,{onFinish:x,children:[Object(a.jsx)("div",{className:"input-label",children:"Log Into DukeWall"}),Object(a.jsx)("div",{className:"input-container",children:Object(a.jsx)(E.a,{type:"email",placeholder:"Email Address",bordered:!0,size:"large",style:{backgroundColor:"#353839",color:"#ffffff"},onChange:function(e){return s(e.target.value)}})}),Object(a.jsx)("div",{className:"input-container",children:Object(a.jsx)(E.a,{type:"password",placeholder:"Password",bordered:!0,size:"large",style:{backgroundColor:"#353839",color:"#ffffff"},onChange:function(e){return b(e.target.value)}})}),Object(a.jsx)("div",{className:"form-button",children:Object(a.jsx)(k.a,{htmlType:"submit",ghost:!0,block:!0,size:"large",children:"Login"})}),Object(a.jsx)("div",{className:"error-text",children:Object(a.jsx)("p",{children:f})})]})]})}function N(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(""),o=Object(p.a)(s,2),i=o[0],u=o[1],b=Object(n.useState)(""),O=Object(p.a)(b,2),h=O[0],f=O[1],x=Object(n.useState)(""),g=Object(p.a)(x,2),v=g[0],w=g[1],_=Object(l.f)(),N=Object(n.useContext)(m),I=N.register,S=N.error,U=function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={email:i,displayname:r,password:h,password2:v},e.next=4,I(t);case 4:e.sent&&_.push("/dashboard"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{align:"center",children:[Object(a.jsx)(y.a,{src:R,className:"image",onClick:function(){return _.push("/")}}),Object(a.jsxs)(C.a,{onFinish:U,children:[Object(a.jsx)("div",{className:"input-label",children:"Register For DukeWall"}),Object(a.jsx)("div",{className:"input-container",children:Object(a.jsx)(E.a,{type:"text",placeholder:"Display Name",bordered:!0,size:"large",style:{backgroundColor:"#353839",color:"#ffffff"},onChange:function(e){return c(e.target.value)},required:!0})}),Object(a.jsx)("div",{className:"input-container",children:Object(a.jsx)(E.a,{type:"email",placeholder:"Email Address",bordered:!0,size:"large",style:{backgroundColor:"#353839",color:"#ffffff"},onChange:function(e){return u(e.target.value)},required:!0})}),Object(a.jsx)("div",{className:"input-container",children:Object(a.jsx)(E.a,{type:"password",placeholder:"Password",bordered:!0,size:"large",style:{backgroundColor:"#353839",color:"#ffffff"},onChange:function(e){return f(e.target.value)},required:!0})}),Object(a.jsx)("div",{className:"input-container",children:Object(a.jsx)(E.a,{type:"password",placeholder:"Password Confirmation",bordered:!0,size:"large",style:{backgroundColor:"#353839",color:"#ffffff"},onChange:function(e){return w(e.target.value)},required:!0})}),Object(a.jsx)("div",{className:"form-button",children:Object(a.jsx)(k.a,{htmlType:"submit",ghost:!0,block:!0,size:"large",children:"Register"})}),Object(a.jsx)("div",{className:"error-text",children:Object(a.jsx)("p",{children:S})})]})]})}var I=r(360),S=function(){var e=Object(n.useContext)(m).addRoute;return Object(a.jsx)(k.a,{onClick:function(){var t={id:Math.floor(1e8*Math.random()),date:(new Date).getMonth()+1+"/"+(new Date).getDate(),gradea:""};e(t)},className:"add",type:"primary",icon:Object(a.jsx)(I.a,{})})},U=r(89),T=r(56),z=function(e){var t=e.setter;return Object(a.jsx)(a.Fragment,{children:!0===t?Object(a.jsxs)(U.a,{children:[Object(a.jsx)(T.a,{span:23,children:Object(a.jsx)("label",{className:"text",children:"Route List"})}),Object(a.jsx)(T.a,{span:1,children:Object(a.jsx)(S,{})})]}):Object(a.jsx)("label",{className:"text",children:"Route List"})})},D=r(352),F=function(e){var t,r,c,s,o=e.id,i=e.field,l=Object(n.useContext)(m),u=l.routes,d=l.editInfo;if("date"===i)return Object(a.jsx)(D.a,{size:"small",onChange:function(e){return d(o,e._d.getMonth()+1+"/"+e._d.getDate(),i)}});switch(i){case"name":var j=["18px","left",c="Route Name",s="text"];t=j[0],r=j[1];break;case"grade":t="14px",r="right",c=i.charAt(0).toUpperCase()+i.slice(1)+"       ",s="number";break;case"wall":t="14px",r="center",c=i.charAt(0).toUpperCase()+i.slice(1),s="number";break;default:t="14px",r="center",c=i.charAt(0).toUpperCase()+i.slice(1),s="text"}var b=u.filter((function(e){return e._id===o})),O=Object(p.a)(b,1)[0];return Object(a.jsx)(E.a,{type:s,style:{fontSize:t,margin:"0px",padding:"0px",textAlign:r},placeholder:c,value:O[i],bordered:!1,onChange:function(e){return d(o,e.target.value,i)}})},L=r(357),G=r(359),A=function(e){var t=e.id,r=Object(n.useContext)(m),c=r.routes,s=r.editInfo,o=["+","","-"],i=Object(a.jsxs)(L.a,{onClick:function(e){return s(t,o[e.key.slice(-1)],"color")},children:[Object(a.jsx)(L.a.Item,{children:"+"}),Object(a.jsx)(L.a.Item,{}),Object(a.jsx)(L.a.Item,{children:"-"})]}),l=c.filter((function(e){return e._id===t})),u=Object(p.a)(l,1)[0];return Object(a.jsx)(G.a,{overlay:i,placement:"bottomCenter",children:Object(a.jsxs)(k.a,{style:{width:"25px"},size:"small",children:[" ",u.gradea," "]})})},P=r(355),M=function(e){var t=e.id,r=Object(n.useContext)(m),c=r.routes,s=r.editInfo,o=["","Red","Green"],i=Object(a.jsxs)(L.a,{onClick:function(e){return s(t,o[e.key.slice(-1)],"color")},children:[Object(a.jsx)(L.a.Item,{}),Object(a.jsx)(L.a.Item,{children:"Red"}),Object(a.jsx)(L.a.Item,{children:"Green"})]}),l=c.filter((function(e){return e._id===t})),u=Object(p.a)(l,1)[0];return Object(a.jsx)(G.a,{overlay:i,placement:"topCenter",children:Object(a.jsxs)(k.a,{style:{width:"75px"},size:"small",children:[" ",u.color," "]})})},q=function(e){var t,r=e.route,n=r.editable;switch(r.color){case"Green":t="#008000";break;case"Red":t="#FF0000";break;case"Blue":t="#0000ff";break;case"Pink":t="#ff00ff";break;case"Purple":t="#6600cc";break;case"Yellow":t="#ffff00";break;default:t="#FFFFFF"}var c=void 0!==r.name?r.name:"Route Name",s=void 0!==r.setter?r.setter:"Setter",o=void 0!==r.grade?"5.".concat(r.grade):"Grade",i=void 0!==r.gradea?r.gradea:"",l=void 0!==r.wall?"Wall ".concat(r.wall):"Wall";c=n?Object(a.jsx)(F,{id:r._id,field:"name"}):c,s=n?Object(a.jsx)(F,{id:r._id,field:"setter"}):s,o=n?Object(a.jsxs)(U.a,{children:[Object(a.jsx)(T.a,{span:18,children:Object(a.jsx)(F,{id:r._id,field:"grade"})}),Object(a.jsxs)(T.a,{span:6,children:[" ",Object(a.jsx)(A,{id:r._id})," "]})]}):Object(a.jsxs)(a.Fragment,{children:[o,i]}),l=n?Object(a.jsx)(F,{id:r._id,field:"wall"}):l;var u=n?Object(a.jsx)(F,{id:r._id,field:"date"}):r.date,d=n?Object(a.jsx)(M,{id:r._id}):null;return Object(a.jsx)(P.a,{size:"small",title:Object(a.jsxs)(U.a,{align:"middle",children:[Object(a.jsx)(T.a,{span:14,children:c}),Object(a.jsx)(T.a,{span:4,children:d}),Object(a.jsx)(T.a,{style:{fontSize:"14px",textAlign:"right"},span:6,children:o})]}),hoverable:!0,bodyStyle:{padding:"2px",fontSize:"14px",textAlign:"center"},headStyle:{fontSize:"18px",borderRight:"5px solid ".concat(t)},style:{width:"100%"},children:Object(a.jsxs)(U.a,{align:"middle",children:[Object(a.jsx)(T.a,{span:8,children:s}),Object(a.jsx)(T.a,{span:8,children:u}),Object(a.jsx)(T.a,{span:8,children:l})]})})},W=r(354),B=r(361),J=function(e,t){var r=Object(n.useContext)(m).editRoute;return Object(a.jsx)(k.a,{onClick:function(){return r(e,t)},type:"primary",icon:Object(a.jsx)(B.a,{})})},H=r(362),Y=function(e){var t=Object(n.useContext)(m).deleteRoute;return Object(a.jsx)(k.a,{onClick:function(){return t(e)},type:"primary",icon:Object(a.jsx)(H.a,{})})},K=function(e){var t=e.setter,r=Object(n.useContext)(m),c=r.routes,s=r.getRoutes;return Object(n.useEffect)((function(){s()}),[]),console.log(c),Object(a.jsx)(W.b,{grid:{gutter:10,column:1},style:{padding:0,margin:0},dataSource:c,renderItem:function(e){return Object(a.jsx)(W.b.Item,{children:!0===t?Object(a.jsxs)(U.a,{justify:"center",align:"middle",children:[Object(a.jsxs)(T.a,{span:22,children:[" ",Object(a.jsx)(q,{route:e},e._id)," "]}),Object(a.jsxs)(T.a,{offset:1,span:1,children:[Object(a.jsx)(J,{route:e,id:e._id})," ",Object(a.jsx)(Y,{id:e._id})]})]}):Object(a.jsx)(q,{route:e},e._id)})}})},Q=function(){var e=Object(n.useContext)(m).logout,t=Object(l.f)();return Object(a.jsx)("div",{children:Object(a.jsx)(k.a,{onClick:function(){e(),t.push("/")},children:"Logout"})})};function V(){var e,t=Object(n.useContext)(m).currUser,r=Object(l.f)();return null===t?(e="User",r.push("/")):e=t.user.displayname,Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:["Hello ",e,Object(a.jsx)(Q,{})]}),Object(a.jsx)("div",{className:"header",children:Object(a.jsx)(z,{setter:"Setter"===e})}),Object(a.jsx)("div",{className:"container",children:Object(a.jsx)(K,{setter:"Setter"===e})})]})}r(349);var X=function(){return Object(a.jsx)(v,{children:Object(a.jsx)(i.a,{children:Object(a.jsxs)(l.c,{children:[Object(a.jsx)(l.a,{exact:!0,path:"/",component:w}),Object(a.jsx)(l.a,{exact:!0,path:"/login",component:_}),Object(a.jsx)(l.a,{exact:!0,path:"/register",component:N}),Object(a.jsx)(l.a,{exact:!0,path:"/dashboard",component:V})]})})})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(X,{})}),document.getElementById("root"))}},[[350,1,2]]]);
//# sourceMappingURL=main.2a308d39.chunk.js.map